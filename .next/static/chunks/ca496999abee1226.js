(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65652,e=>{"use strict";e.s(["Headers",()=>i,"Request",()=>s,"Response",()=>o,"default",()=>a,"fetch",()=>r]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let r=t.fetch,a=t.fetch.bind(t),i=t.Headers,s=t.Request,o=t.Response},20998,e=>{"use strict";e.s(["default",()=>o],20998);var t=e.i(34729);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)((e,r)=>{let{color:s="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...f}=e;return(0,t.createElement)("svg",{ref:r,...i,width:o,height:o,stroke:s,strokeWidth:l?24*Number(n)/Number(o):n,className:a("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(f)&&{"aria-hidden":"true"},...f},[...d.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(u)?u:[u]])}),o=(e,i)=>{let o=(0,t.forwardRef)((o,n)=>{let{className:l,...c}=o;return(0,t.createElement)(s,{ref:n,iconNode:i,className:a("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return o.displayName=r(e),o}},12814,e=>{"use strict";e.s(["Button",()=>r]);var t=e.i(35143);let r=e.i(34729).forwardRef((e,r)=>{let{className:a="",...i}=e;return(0,t.jsx)("button",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ".concat(a),ref:r,...i})});r.displayName="Button"},40903,88883,e=>{"use strict";e.s(["Eye",()=>r],40903);var t=e.i(20998);let r=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["EyeOff",()=>a],88883);let a=(0,t.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},25732,e=>{"use strict";e.s(["Lock",()=>t],25732);let t=(0,e.i(20998).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},11380,12499,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["subscriptionService",()=>a],11380),e.s(["_",()=>t],12499);var r=e.i(25600);let a=new class{initializeMockData(){console.log("SubscriptionService: Initializing mock data");let e=new Date;e.setFullYear(e.getFullYear()+3);let t={id:"test-user-1",email:"test@sungaze.com",tier:"founder_444",founderNumber:1,founderRegion:"us",badges:["First Witness of the Flame","Solar Pioneer"],seals:["Dawn Keeper","Light Bearer"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),purchaseDate:new Date().toISOString(),expirationDate:e.toISOString(),subscriptionStatus:"active"},r={...t,id:"cobyobi@gmail.com",email:"cobyobi@gmail.com"};this.mockData.set("test-user-1",t),this.mockData.set("cobyobi@gmail.com",r),this.founderSlots.sold=37,this.founderSlots.remaining=407,console.log("SubscriptionService: Mock data initialized:",t)}async getUserProfile(e){if(console.log("SubscriptionService: Getting profile for userId:",e),console.log("SubscriptionService: Supabase client available:",!!this.supabase),"test-user-1"===e||"cobyobi@gmail.com"===e){console.log("SubscriptionService: Using mock data mode for development");let t=this.mockData.get(e)||null;return console.log("SubscriptionService: Mock profile found:",t),t}if(!this.supabase){console.log("SubscriptionService: Using mock data mode");let t=this.mockData.get(e)||null;return console.log("SubscriptionService: Mock profile found:",t),t}try{console.log("SubscriptionService: Querying Supabase for user profile");let{data:t,error:r}=await this.supabase.from("user_profiles").select("*").eq("id",e).single();if(r)return console.error("SubscriptionService: Error fetching user profile:",{message:r.message||"Unknown error",code:r.code||"unknown",details:r.details||"No details available",hint:r.hint||"No hint available"}),console.log("SubscriptionService: Falling back to mock data"),this.mockData.get(e)||null;if(!t)return console.log("SubscriptionService: No profile found in Supabase, falling back to mock data"),this.mockData.get(e)||null;return console.log("SubscriptionService: Supabase profile found:",t),t}catch(t){return console.error("SubscriptionService: Error in getUserProfile:",t),console.log("SubscriptionService: Falling back to mock data due to error"),this.mockData.get(e)||null}}async createUserProfile(e){let t={id:e.id||crypto.randomUUID(),email:e.email||"",tier:e.tier||"free",badges:e.badges||[],seals:e.seals||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...e};if(!this.supabase)return this.mockData.set(t.id,t),t;try{let{data:e,error:r}=await this.supabase.from("user_profiles").insert([t]).select().single();if(r)throw console.error("Error creating user profile:",r),r;return e}catch(e){throw console.error("Error in createUserProfile:",e),e}}async updateUserTier(e,t,r){try{let a={tier:t,updatedAt:new Date().toISOString(),...r};if("founder_444"===t){let{data:t}=await this.supabase.from("user_profiles").select("badges").eq("id",e).single();if(t){let e=t.badges||[];a.badges=[...new Set([...e,"First Witness of the Flame"])]}}let{data:i,error:s}=await this.supabase.from("user_profiles").update(a).eq("id",e).select().single();if(s)return console.error("Error updating user tier:",s),null;return i}catch(e){return console.error("Error in updateUserTier:",e),null}}async purchaseFounderSlot(e){try{let{data:t,error:r}=await this.supabase.from("founder_slots").select("*").single();if(r||!t)return{success:!1,error:"Failed to check founder slots"};if(t.remaining<=0)return{success:!1,error:"All 444 Founder passes have been claimed worldwide"};let{data:a,error:i}=await this.supabase.from("founder_slots").update({sold:t.sold+1,remaining:t.remaining-1,lastUpdated:new Date().toISOString()}).eq("id",t.id).select().single();if(i)return{success:!1,error:"Failed to reserve founder slot"};let s=a.sold,o=new Date;o.setFullYear(o.getFullYear()+3);let{data:n}=await this.supabase.from("user_profiles").select("badges").eq("id",e).single(),l=(null==n?void 0:n.badges)||[],{error:c}=await this.supabase.from("user_profiles").update({tier:"founder_444",founderNumber:s,purchaseDate:new Date().toISOString(),expirationDate:o.toISOString(),badges:[...new Set([...l,"First Witness of the Flame","Solar Pioneer"])],updatedAt:new Date().toISOString()}).eq("id",e);if(c)return console.error("Error updating user profile:",c),{success:!1,error:"Failed to update user profile"};return{success:!0,founderNumber:s}}catch(e){return console.error("Error in purchaseFounderSlot:",e),{success:!1,error:"An unexpected error occurred"}}}async getFounderSlots(){if(!this.supabase)return{...this.founderSlots};try{let{data:e,error:t}=await this.supabase.from("founder_slots").select("*").single();if(t||!e)return console.error("Error fetching founder slots:",t),{sold:0,remaining:444,lastUpdated:new Date().toISOString()};return e}catch(e){return console.error("Error in getFounderSlots:",e),{sold:0,remaining:444,lastUpdated:new Date().toISOString()}}}async hasFounderAccess(e){if(!this.supabase){let t=this.mockData.get(e);return!!t&&"founder_444"===t.tier&&(!t.expirationDate||new Date(t.expirationDate)>new Date)}try{let{data:t,error:r}=await this.supabase.from("user_profiles").select("tier, expirationDate").eq("id",e).single();if(r||!t||"founder_444"!==t.tier)return!1;if(t.expirationDate)return new Date(t.expirationDate)>new Date;return!0}catch(e){return console.error("Error in hasFounderAccess:",e),!1}}async canAccessFeature(e,t){if(!this.supabase){let r=this.mockData.get(e);if(!r)return!1;if("founder_444"===r.tier)return await this.hasFounderAccess(e);let a={free:0,monthly:1,yearly:2,founder_444:3};return a[r.tier]>=a[t]}try{let{data:r,error:a}=await this.supabase.from("user_profiles").select("tier, expirationDate").eq("id",e).single();if(a||!r)return!1;if("founder_444"===r.tier)return await this.hasFounderAccess(e);let i={free:0,monthly:1,yearly:2,founder_444:3},s=i[r.tier],o=i[t];return s>=o}catch(e){return console.error("Error in canAccessFeature:",e),!1}}async getUserStats(e){if(!this.supabase){let t,r=this.mockData.get(e);if(!r)return null;if(r.expirationDate){let e=new Date(r.expirationDate),a=new Date;t=Math.ceil((e.getTime()-a.getTime())/864e5)}return{tier:r.tier,badges:r.badges||[],seals:r.seals||[],founderNumber:r.founderNumber,daysRemaining:t}}try{let t,{data:r,error:a}=await this.supabase.from("user_profiles").select("tier, badges, seals, founderNumber, expirationDate").eq("id",e).single();if(a||!r)return null;if(r.expirationDate){let e=new Date(r.expirationDate),a=new Date,i=e.getTime()-a.getTime();t=Math.ceil(i/864e5)}return{tier:r.tier,badges:r.badges||[],seals:r.seals||[],founderNumber:r.founderNumber,daysRemaining:t}}catch(e){return console.error("Error in getUserStats:",e),null}}async initializeDatabase(){if(!this.supabase)return void console.log("Supabase not configured, using mock data mode");try{let{data:e,error:t}=await this.supabase.from("founder_slots").select("*").single();(t||!e)&&await this.supabase.from("founder_slots").insert([{sold:0,remaining:444,lastUpdated:new Date().toISOString()}])}catch(e){console.error("Error initializing database:",e)}}constructor(){t(this,"supabase",(0,r.createClient)()),t(this,"mockData",new Map),t(this,"founderSlots",{sold:0,remaining:444,lastUpdated:new Date().toISOString()}),console.log("SubscriptionService: Constructor called"),console.log("SubscriptionService: Supabase client available:",!!this.supabase),console.log("SubscriptionService: Initializing mock data for fallback"),this.initializeMockData(),this.supabase?console.log("SubscriptionService: Supabase configured, will use real database with mock fallback"):console.log("SubscriptionService: Using mock data mode only")}};a.initializeDatabase()},39426,e=>{"use strict";e.s(["Save",()=>t],39426);let t=(0,e.i(20998).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},36773,e=>{"use strict";e.s(["CheckCircle",()=>t],36773);let t=(0,e.i(20998).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},98377,e=>{"use strict";e.s(["ArrowLeft",()=>t],98377);let t=(0,e.i(20998).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},10463,e=>{"use strict";e.s(["CreditCard",()=>t],10463);let t=(0,e.i(20998).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},17125,64800,e=>{"use strict";e.s(["Play",()=>r],17125);var t=e.i(20998);let r=(0,t.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Pause",()=>a],64800);let a=(0,t.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},75927,e=>{"use strict";e.s(["Upload",()=>t],75927);let t=(0,e.i(20998).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},45701,e=>{"use strict";e.s(["Check",()=>t],45701);let t=(0,e.i(20998).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},59035,e=>{"use strict";e.s(["Shield",()=>t],59035);let t=(0,e.i(20998).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},65819,e=>{"use strict";e.s(["Trash2",()=>t],65819);let t=(0,e.i(20998).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},10024,e=>{"use strict";e.s(["Plus",()=>t],10024);let t=(0,e.i(20998).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4080,e=>{e.v(e=>Promise.resolve().then(()=>e(65652)))}]);