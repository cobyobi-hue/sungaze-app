module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},61724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},11334,e=>{"use strict";e.s(["deleteSecret",()=>o,"getSecret",()=>n,"getSecretInfo",()=>l,"listSecrets",()=>c,"rotateSecret",()=>i,"setSecret",()=>a]);var t=e.i(54799);class r{static instance;secrets=new Map;encryptionKey;constructor(){this.encryptionKey=process.env.SECRETS_MASTER_KEY||"sungaze-default-key-change-in-prod",this.initializeDefaults()}static getInstance(){return r.instance||(r.instance=new r),r.instance}initializeDefaults(){["OPENAI_API_KEY","STRIPE_SECRET_KEY","STRIPE_WEBHOOK_SECRET","NEXT_PUBLIC_ELEVENLABS_API_KEY","NEXT_PUBLIC_ELEVENLABS_VOICE_ID"].forEach(e=>{let t=process.env[e];t&&!this.secrets.has(e)&&this.setSecret(e,t)})}encrypt(e){let r=(0,t.randomBytes)(16),s=(0,t.createHash)("sha256").update(this.encryptionKey).digest(),n=(0,t.createCipheriv)("aes-256-cbc",s,r),a=n.update(e,"utf8","hex");return a+=n.final("hex"),r.toString("hex")+":"+a}decrypt(e){let[r,s]=e.split(":"),n=Buffer.from(r,"hex"),a=(0,t.createHash)("sha256").update(this.encryptionKey).digest(),o=(0,t.createDecipheriv)("aes-256-cbc",a,n),i=o.update(s,"hex","utf8");return i+o.final("utf8")}async setSecret(e,t,r=!0){let s={key:e,value:r?this.encrypt(t):t,encrypted:r,createdAt:this.secrets.has(e)?this.secrets.get(e).createdAt:new Date,updatedAt:new Date};this.secrets.set(e,s),console.log(`Secret ${e} ${this.secrets.has(e)?"updated":"stored"} securely`)}async getSecret(e){let t=this.secrets.get(e);return t?t.encrypted?this.decrypt(t.value):t.value:(console.warn(`Secret ${e} not found`),null)}async deleteSecret(e){let t=this.secrets.delete(e);return t&&console.log(`Secret ${e} deleted`),t}listSecretKeys(){return Array.from(this.secrets.keys())}getSecretInfo(e){let t=this.secrets.get(e);return t?{key:t.key,encrypted:t.encrypted,createdAt:t.createdAt,updatedAt:t.updatedAt}:null}async rotateSecret(e,t){if(!this.secrets.has(e))throw Error(`Secret ${e} does not exist`);await this.setSecret(e,t),console.log(`Secret ${e} rotated successfully`)}}let s=r.getInstance(),n=e=>s.getSecret(e),a=(e,t,r)=>s.setSecret(e,t,r),o=e=>s.deleteSecret(e),i=(e,t)=>s.rotateSecret(e,t),c=()=>s.listSecretKeys(),l=e=>s.getSecretInfo(e)},39332,(e,t,r)=>{},19218,e=>{"use strict";e.s(["handler",()=>I,"patchFetch",()=>P,"routeModule",()=>C,"serverHooks",()=>T,"workAsyncStorage",()=>j,"workUnitAsyncStorage",()=>_],19218);var t=e.i(99156),r=e.i(55057),s=e.i(62121),n=e.i(25892),a=e.i(1587),o=e.i(98168),i=e.i(29915),c=e.i(43115),l=e.i(60946),u=e.i(78351),d=e.i(35085),p=e.i(48060),h=e.i(13670),x=e.i(45348),R=e.i(93695);e.i(98335);var f=e.i(31990);e.s(["DELETE",()=>N,"GET",()=>v,"POST",()=>m,"PUT",()=>w],80439);var y=e.i(41641),g=e.i(11334);let E=process.env.SECRETS_ADMIN_TOKEN||"sungaze-admin-change-me";function S(e){let t=e.headers.get("authorization");return t?.replace("Bearer ","")===E}async function v(e){if(!S(e))return y.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:t}=new URL(e.url),r=t.get("key");try{if(r){let e=(0,g.getSecretInfo)(r);if(!e)return y.NextResponse.json({error:"Secret not found"},{status:404});return y.NextResponse.json({secret:e})}{let e=(0,g.listSecrets)().map(e=>(0,g.getSecretInfo)(e)).filter(Boolean);return y.NextResponse.json({secrets:e})}}catch(e){return console.error("Secrets API error:",e),y.NextResponse.json({error:"Internal server error"},{status:500})}}async function m(e){if(!S(e))return y.NextResponse.json({error:"Unauthorized"},{status:401});try{let{key:t,value:r,encrypt:s=!0}=await e.json();if(!t||!r)return y.NextResponse.json({error:"Key and value are required"},{status:400});return await (0,g.setSecret)(t,r,s),y.NextResponse.json({message:"Secret stored successfully",key:t})}catch(e){return console.error("Store secret error:",e),y.NextResponse.json({error:"Failed to store secret"},{status:500})}}async function w(e){if(!S(e))return y.NextResponse.json({error:"Unauthorized"},{status:401});try{let{key:t,value:r}=await e.json();if(!t||!r)return y.NextResponse.json({error:"Key and value are required"},{status:400});return await (0,g.rotateSecret)(t,r),y.NextResponse.json({message:"Secret rotated successfully",key:t})}catch(e){return console.error("Rotate secret error:",e),y.NextResponse.json({error:"Failed to rotate secret"},{status:500})}}async function N(e){if(!S(e))return y.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:t}=new URL(e.url),r=t.get("key");if(!r)return y.NextResponse.json({error:"Key is required"},{status:400});try{if(!await (0,g.deleteSecret)(r))return y.NextResponse.json({error:"Secret not found"},{status:404});return y.NextResponse.json({message:"Secret deleted successfully",key:r})}catch(e){return console.error("Delete secret error:",e),y.NextResponse.json({error:"Failed to delete secret"},{status:500})}}var A=e.i(80439);let C=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/secrets/route",pathname:"/api/secrets",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/SUNGAZE APP/package.json/src/app/api/secrets/route.ts",nextConfigOutput:"",userland:A}),{workAsyncStorage:j,workUnitAsyncStorage:_,serverHooks:T}=C;function P(){return(0,s.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:_})}async function I(e,t,s){var y;let g="/api/secrets/route";g=g.replace(/\/index$/,"")||"/";let E=await C.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!E)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:S,params:v,nextConfig:m,isDraftMode:w,prerenderManifest:N,routerServerContext:A,isOnDemandRevalidate:j,revalidateOnlyGenerated:_,resolvedPathname:T}=E,P=(0,o.normalizeAppPath)(g),I=!!(N.dynamicRoutes[P]||N.routes[T]);if(I&&!w){let e=!!N.routes[T],t=N.dynamicRoutes[P];if(t&&!1===t.fallback&&!e)throw new R.NoFallbackError}let b=null;!I||C.isDev||w||(b="/index"===(b=T)?"/":b);let k=!0===C.isDev||!I,O=I&&!k,q=e.method||"GET",U=(0,a.getTracer)(),K=U.getActiveScopeSpan(),D={params:v,prerenderManifest:N,renderOpts:{experimental:{cacheComponents:!!m.experimental.cacheComponents,authInterrupts:!!m.experimental.authInterrupts},supportsDynamicResponse:k,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(y=m.experimental)?void 0:y.cacheLife,isRevalidate:O,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,s)=>C.onRequestError(e,t,s,A)},sharedContext:{buildId:S}},H=new i.NodeNextRequest(e),M=new i.NodeNextResponse(t),$=c.NextRequestAdapter.fromNodeNextRequest(H,(0,c.signalFromNodeResponse)(t));try{let o=async r=>C.handle($,D).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let s=U.getRootSpanAttributes();if(!s)return;if(s.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${s.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=s.get("next.route");if(n){let e=`${q} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${q} ${e.url}`)}),i=async a=>{var i,c;let l=async({previousCacheEntry:r})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&j&&_&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(a);e.fetchMetrics=D.renderOpts.fetchMetrics;let c=D.renderOpts.pendingWaitUntil;c&&s.waitUntil&&(s.waitUntil(c),c=void 0);let l=D.renderOpts.collectedTags;if(!I)return await (0,d.sendResponse)(H,M,i,D.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,p.toNodeOutgoingHttpHeaders)(i.headers);l&&(t[x.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==D.renderOpts.collectedRevalidate&&!(D.renderOpts.collectedRevalidate>=x.INFINITE_CACHE)&&D.renderOpts.collectedRevalidate,s=void 0===D.renderOpts.collectedExpire||D.renderOpts.collectedExpire>=x.INFINITE_CACHE?void 0:D.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:s}}}}catch(t){throw(null==r?void 0:r.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isRevalidate:O,isOnDemandRevalidate:j})},A),t}},R=await C.handleResponse({req:e,nextConfig:m,cacheKey:b,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:N,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:_,responseGenerator:l,waitUntil:s.waitUntil});if(!I)return null;if((null==R||null==(i=R.value)?void 0:i.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==R||null==(c=R.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",j?"REVALIDATED":R.isMiss?"MISS":R.isStale?"STALE":"HIT"),w&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,p.fromNodeOutgoingHttpHeaders)(R.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&I||y.delete(x.NEXT_CACHE_TAGS_HEADER),!R.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,h.getCacheControlHeader)(R.cacheControl)),await (0,d.sendResponse)(H,M,new Response(R.value.body,{headers:y,status:R.value.status||200})),null};K?await i(K):await U.withPropagatedContext(e.headers,()=>U.trace(l.BaseServerSpan.handleRequest,{spanName:`${q} ${e.url}`,kind:a.SpanKind.SERVER,attributes:{"http.method":q,"http.target":e.url}},i))}catch(t){if(K||t instanceof R.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isRevalidate:O,isOnDemandRevalidate:j})}),I)throw t;return await (0,d.sendResponse)(H,M,new Response(null,{status:500})),null}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__153c09ca._.js.map